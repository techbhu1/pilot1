<html lang="en-US">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<title>2-Configuring UDLD</title>
<link href="../../rhstylemapping.css" rel="stylesheet" type="text/css" />
<link href="../os8_nt___Web.css" rel="stylesheet" type="text/css" />
<link href="../../editstyle.css" rel="stylesheet" type="text/css" /><script type="text/javascript" language="JavaScript">
//<![CDATA[
function reDo() {
  if (innerWidth != origWidth || innerHeight != origHeight)
     location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
	origWidth = innerWidth;
	origHeight = innerHeight;
	onresize = reDo;
}
onerror = null; 
//]]>
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute;
left:0px;
top:0px;
z-index:4;
visibility:hidden; }
p.WebHelpNavBar { text-align:right; }
-->
</style>
 <meta name="generator" content="Adobe FrameMaker v16.0" />
<script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
<script type="text/javascript" src="../../template/scripts/common.min.js"></script>
<script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
<script type="text/javascript" src="../../template/scripts/constants.js"></script>
<script type="text/javascript" src="../../template/scripts/utils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhutils.js"></script>
<script type="text/javascript" src="../../template/scripts/mhlang.js"></script>
<script type="text/javascript" src="../../template/scripts/mhver.js"></script>
<script type="text/javascript" src="../../template/scripts/settings.js"></script>
<script type="text/javascript" src="../../template/scripts/XmlJsReader.js"></script>
<script type="text/javascript" src="../../template/scripts/loadparentdata.js"></script>
<script type="text/javascript" src="../../template/scripts/loadscreen.js"></script>
<script type="text/javascript" src="../../template/scripts/loadprojdata.js"></script>
<script type="text/javascript" src="../../template/scripts/mhtopic.js"></script>
 <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css">
<script type="text/javascript" >
gRootRelPath = "../..";
gCommonRootRelPath = "../..";
gTopicId = "0_4";
</script>
</head>
<body dir="ltr">
<script type="text/javascript" src="../../ehlpdhtm.js"></script>
<div class="FLOW_A" dir="ltr"><p class="Chapter_Title" id="1011037">2    <a id="XREF_59738__1_Managing_Source_Learning147" name="XREF_59738__1_Managing_Source_Learning147">Configuring UDLD</a></p><p class="text" id="1026900"><a id="147_text_1026900" name="147_text_1026900"></a>UniDirectional Link Detection (UDLD) is a protocol for detecting and disabling unidirectional Ethernet fiber or copper links caused by mis&#x2D;wiring of fiber strands, interface malfunctions, media converter faults, and so on. The UDLD protocol operates at Layer 2 in conjunction with the IEEE 8&#x30;2.3 &#x2D; Layer 1 fault detection mechanisms.</p><p class="text" id="1026940">UDLD is a lightweight protocol that can be used to detect and disable one&#x2D;way connections before they create dangerous situations such as Spanning Tree loops or other protocol malfunctions. The protocol is mainly used to advertise the identities of all the UDLD&#x2D;capable devices attached to the same LAN segment and to collect the information received on the ports of each device to determine whether or not the Layer 2 communication is functioning properly. All connected devices must support UDLD for the protocol to successfully identify and disable unidirectional links. When UDLD detects a unidirectional link, the protocol administratively shuts down the affected port and generates a trap to alert the user. </p><p class="heading1" id="1026943">In This Chapter</p><p class="text" id="1026432">This chapter describes how to configure UDLD parameters through the Command Line Interface (CLI). CLI commands are used in the configuration examples; for more details about the syntax of commands, see the <span class="Times_italics" style="font-style:Italic;background-color:transparent;"><span data-keyref="CLI Reference Guide">OmniSwitch AOS Release 8 CLI Reference Guide</span></span>.</p><p class="text" id="1026436">Configuration procedures described in this chapter include the following&#x3A; </p><p class="bullet" id="1014537"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_79725__Configuring_UDLD147" style="color:#0000ff;background-color:transparent;">Configuring UDLD</a>.</p><p class="bullet" id="1014538"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_54629__Configuring_mode147" style="color:#0000ff;background-color:transparent;">Configuring the Operational Mode</a>.</p><p class="bullet" id="1014542"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_95742__Configuring_Maximum_Number_of_MAC_Addresses_Allowed147" style="color:#0000ff;background-color:transparent;">Configuring the Probe-Timer</a>.</p><p class="bullet" id="1022243"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_92128__Configuring_echo-wait-timer147" style="color:#0000ff;background-color:transparent;">Configuring the Echo-Wait-Timer</a>. </p><p class="bullet" id="1012418"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_15429__Clearing_UDLD_Statistics147" style="color:#0000ff;background-color:transparent;">Clearing UDLD Statistics</a>.</p><p class="bullet" id="1026822"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_66212__Recovering_a_port_from_UDLD_shutdown147" style="color:#0000ff;background-color:transparent;">Verifying the UDLD Configuration</a>.</p><p class="bullet" id="1012252"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_66212__Recovering_a_port_from_UDLD_shutdown147" style="color:#0000ff;background-color:transparent;">Verifying the UDLD Configuration</a>.</p><p class="heading1" id="1020657">UDLD <a id="index_1020595" name="index_1020595"></a><a data-indexterm="defaults:UDLD" id="defaults_UDLD" name="defaults_UDLD"></a><a data-indexterm="udld:defaults" id="UDLD_defaults" name="UDLD_defaults"></a>Defaults <div align="left"><table class="Defaults_Table" style="max-width: 100% ;height: auto;"><col width="216.00px"/><col width="192.00px"/><col width="144.00px"/><thead><tr height="28.67px"><th><p class="CellHeading" id="1020598">Parameter Description</p></th><th><p class="CellHeading" id="1020600">Command</p></th><th><p class="CellHeading" id="1020602">Default</p></th></tr></thead><tr height="23.33px"><td><p class="CellBody" id="1020604">UDLD administrative state</p></td><td><p class="CellBody" id="1020609"><a href="../c_udld/c_udld.htm#XREF_46756__udld"></a><a href="../c_udld/c_udld.htm#XREF_46756__udld" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld</a></p></td><td><p class="CellBody" id="1020611">Disabled</p></td></tr><tr height="23.33px"><td><p class="CellBody" id="1020613">UDLD status of a port</p></td><td><p class="CellBody" id="1020618"><a href="../c_udld/c_udld.htm#XREF_42692__lldp_transmit_hold-multiplier" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld port</a></p></td><td><p class="CellBody" id="1020620">Disabled</p></td></tr><tr height="23.33px"><td><p class="CellBody" id="1021586">UDLD operational mode</p></td><td><p class="CellBody" id="1021591"><a href="../c_udld/c_udld.htm#XREF_30700__udld_port_mode" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld mode</a></p></td><td><p class="CellBody" id="1021593">Normal</p></td></tr><tr height="23.33px"><td><p class="CellBody" id="1020622">Probe&#x2D;message advertisement timer</p></td><td><p class="CellBody" id="1020627"><a href="../c_udld/c_udld.htm#XREF_88626__udld_probe-timer" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld probe-timer</a></p></td><td><p class="CellBody" id="1020629">15 seconds</p></td></tr><tr height="23.33px"><td><p class="CellBody" id="1020631">Echo&#x2D;based detection timer</p></td><td><p class="CellBody" id="1020636"><a href="../c_udld/c_udld.htm#XREF_40594__show_lldp_remote-system" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld echo-wait-timer</a></p></td><td><p class="CellBody" id="1020638">8 seconds</p></td></tr></table></div></p><p class="heading1" id="1024307"><a id="XREF_77056__Sample_MAC_Address_Table_Configuration147" name="XREF_77056__Sample_MAC_Address_Table_Configuration147">Quick </a><a id="index_1024306" name="index_1024306"></a><a data-indexterm="application%20examples:UDLD" id="application_examples_UDLD" name="application_examples_UDLD"></a><a data-indexterm="udld:application%20examples" id="UDLD_application_examples" name="UDLD_application_examples"></a>Steps for Configuring UDLD</p><p class="step_first" id="1024849" style="margin-left : 33.00pt;"><span class="Futura_Bold">1&#160;&#160;&#160; </span>To enable the UDLD protocol on a switch, use the <a id="index_1024845" name="index_1024845"></a><a data-indexterm="%3Cindex%3Eudld%3Cdefault%20para%20font%3E%20command" id="%3Cindex%3Eudld%3Cdefault_para_font%3E_command" name="%3Cindex%3Eudld%3Cdefault_para_font%3E_command"></a><span style="font-kerning:normal;"><a href="../c_udld/c_udld.htm#XREF_46756__udld" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld</a></span><span style="font-kerning:normal;"> command</span>. For example&#x3A;</p><p class="example1" id="1024850">&#x2D;&#x3E; udld enable</p><p class="step_next" id="1024855"><span class="Futura_Bold">2&#160;&#160;&#160; </span>To enable the UDLD protocol on a port, use the <a id="index_1024851" name="index_1024851"></a><a data-indexterm="%3Cindex%3Eudld%20port%3Cdefault%20para%20font%3E%20command" id="%3Cindex%3Eudld_port%3Cdefault_para_font%3E_command" name="%3Cindex%3Eudld_port%3Cdefault_para_font%3E_command"></a><span style="font-kerning:normal;"><a href="../c_udld/c_udld.htm#XREF_42692__lldp_transmit_hold-multiplier" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld port</a></span><span style="font-kerning:normal;"> command by entering </span><span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">udld port</span><span style="font-kerning:normal;">, followed by </span>the slot and port number, and <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">enable</span>. For example&#x3A;</p><p class="example1" id="1024313">&#x2D;&#x3E; udld port 1&#47;6 enable</p><p class="step_next" id="1024314"><span class="Futura_Bold">3&#160;&#160;&#160; </span>Configure the operational mode of UDLD <span style="font-kerning:normal;">by entering </span><span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">udld port</span><span style="font-kerning:normal;">, followed by </span>the slot and port number, <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">mode</span>, and the operational mode. For example&#x3A;</p><p class="example1" id="1024315">&#x2D;&#x3E; udld port 1&#47;6 mode aggressive</p><p class="step_next" id="1028750"><span class="Futura_Bold">4&#160;&#160;&#160; </span>Configure the probe&#x2D;message advertisement timer on port 6 of slot 1 as 17 seconds using the following command&#x3A;</p><p class="example1" id="1028751">&#x2D;&#x3E; udld port 1&#47;6 probe&#x2D;timer 17</p><p><div align="left"><table class="Note" style="max-width: 100% ;height: auto;"><col width="600.00px"/><tr height="517.33px"><td><p class="CellBody_note_text" id="1031232"><span class="Bold">Note.  </span><span class="Times_italics" style="font-style:Italic;font-kerning:none;background-color:transparent;">Optional</span><span style="font-kerning:none;">. Verify the UDLD global configuration by entering the <a id="index_1031247" name="index_1031247"></a><a data-indexterm="%3Cindex%3Eshow%20udld%20configuration%3Cdefault%20para%20font%3E%20command" id="%3Cindex%3Eshow_udld_configuration%3Cdefault_para_font%3E_command" name="%3Cindex%3Eshow_udld_configuration%3Cdefault_para_font%3E_command"></a></span><a href="../c_udld/c_udld.htm#XREF_51176__show_udld_configuration" style="font-weight:Bold;font-kerning:none;color:#0000ff;background-color:transparent;">show udld configuration</a> command <span style="font-kerning:none;">or verify the UDLD configuration on a port by entering the </span><a href="../c_udld/c_udld.htm#XREF_98813__show_udld_configuration_port" style="font-weight:Bold;font-kerning:none;color:#0000ff;background-color:transparent;">show udld configuration port</a>&#160;<span style="font-kerning:none;">command. For example&#x3A;</span></p><p class="screen2" id="1031265"><br/></p><p class="screen2" id="1031284">&#x2D;&#x3E; show udld configuration</p><p class="screen2" id="1031309"><br/></p><p class="screen2" id="1031285">Global UDLD Status &#x3A; Disabled</p><p class="screen2" id="1031286"><br/></p><p class="screen2" id="1031287">&#x2D;&#x3E; show udld configuration port 1&#47;6</p><p class="screen2" id="1031288">Global UDLD Status&#x3A; enabled</p><p class="screen2" id="1031289">Port UDLD Status&#x3A; enabled</p><p class="screen2" id="1031290">Port UDLD State&#x3A; bidirectional&#160;&#160;&#160;</p><p class="screen2" id="1031291">UDLD Op&#x2D;Mode&#x3A; normal</p><p class="screen2" id="1031292">Probe Timer (Sec)&#x3A; 2&#x30;,</p><p class="screen2" id="1031293">Echo&#x2D;Wait Timer (Sec)&#x3A; 1&#x30;</p><p class="screen2" id="1032071"><br/></p><p class="CellBody_note_text" id="1031298">To verify the UDLD statistics of a port, use the <a id="index_1031294" name="index_1031294"></a><a data-indexterm="%3Cindex%3Eshow%20udld%20statistics%20port%3Cdefault%20para%20font%3E%20command" id="%3Cindex%3Eshow_udld_statistics_port%3Cdefault_para_font%3E_command" name="%3Cindex%3Eshow_udld_statistics_port%3Cdefault_para_font%3E_command"></a><a href="../c_udld/c_udld.htm#XREF_73091__show_udld_statistics_port" style="font-weight:Bold;font-kerning:none;color:#0000ff;background-color:transparent;">show udld statistics port</a><span class="Times_Bold" style="font-weight:Bold;font-kerning:none;background-color:transparent;">&#160;</span>command. For example&#x3A;</p><p class="screen2" id="1031316"><br/></p><p class="screen2" id="1032066">&#x2D;&#x3E; show udld statistics port 1&#47;42</p><p class="screen2" id="1031340"><br/></p><p class="screen2" id="1031317">UDLD Port Statistics</p><p class="screen2" id="1031318"> Hello Packet Send        &#x3A;8,</p><p class="screen2" id="1031319"> Echo Packet Send         &#x3A;8,</p><p class="screen2" id="1031320"> Flush Packet Recvd       &#x3A;&#x30;</p><p class="screen2" id="1031321">UDLD Neighbor Statistics</p><p class="screen2" id="1031322"> Neighbor ID    Hello Pkts Recv       Echo Pkts Recv</p><p class="screen2" id="1031323">&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;+&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;+&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;&#x2D;</p><p class="screen2" id="1031324">      1              8               15</p><p class="screen2" id="1031325">      2              8               15</p><p class="screen2" id="1031326">      3              8               21</p><p class="screen2" id="1031327">      4              8               14</p><p class="screen2" id="1031328">      5              8               15</p><p class="screen2" id="1031329">      6              8               2&#x30;</p></td></tr></table></div></p><p class="heading1" id="1024658">UDLD <a id="index_1024657" name="index_1024657"></a><a data-indexterm="udld:overview" id="UDLD_overview" name="UDLD_overview"></a>Overview</p><p class="text" id="1025784">UDLD is a Layer 2 protocol used to examine the physical configuration connected through fiber&#x2D;optic or twisted&#x2D;pair Ethernet cables. When a port is affected and only a unidirectional link is working, UDLD detects and administratively shuts down the affected port, and alerts the user. Unidirectional links can create<span style="color:#ff00ff;">&#160;</span>hazardous situations such as Spanning&#x2D;Tree topology loops caused, for instance, by unwiring of fiber strands, interface malfunctions, faults of the media converter, and so on.</p><p class="text" id="1025789">The UDLD feature is supported on the following port types&#x3A;</p><p class="bullet" id="1025685"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>Copper ports</p><p class="bullet" id="1025690"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>Fiber ports </p><p class="heading2" id="1024106">UDLD Operational Mode</p><p class="text" id="1024135">UDLD supports two modes of operation&#x3A; </p><p class="bullet" id="1028790"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>Normal mode</p><p class="bullet" id="1028791"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>Aggressive mode </p><p class="text" id="1028792">UDLD works with the Layer 1 mechanisms to determine the physical status of a link. A unidirectional link occurs whenever the traffic sent from a local device is received by its neighbor; but the traffic from the neighbor is not received by the local device.</p><p class="heading3" id="1024137">Normal Mode</p><p class="text" id="1025143">In this mode, the protocol depends<span style="color:#ff00ff;">&#160;</span>on explicit information instead of implicit information. If the protocol is unable to retrieve any explicit information, the port is not put in the shutdown state; instead, it is marked as <span class="Bold">Undetermined</span>. The port is put in the shutdown state only when&#x3A;</p><p class="bullet" id="1028817"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>It is explicitly determined that the link is defective </p><p class="bullet" id="1028818"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>When it is determined on the basis of UDLD&#x2D;PDU processing that link has become unidirectional. </p><p class="text" id="1028819">In any such state transition, a trap is raised.</p><p class="heading3" id="1024912">Aggressive Mode</p><p class="text" id="1025157">In this mode, UDLD checks whether the connections are correct and the traffic is flowing bidirectionally between the respective<span style="color:#ff00ff;">&#160;</span>neighbors. The loss of communication with the neighbor is considered an event to put the port in shutdown state. Thus, if the UDLD PDUs are not received before the expiry of a timer, the port is put in the <span class="Bold">UDLD&#x2D;shutdown</span> state. Since the lack of information is not always due to a defective link, this mode is optional and is recommended only for point&#x2D;to&#x2D;point links. </p><p class="text" id="1024904">UDLD shuts down the affected interface when one of these problems <span style="color:#000000;">occurs</span>&#x3A; </p><p class="bullet" id="1024140"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>On fiber&#x2D;optic or twisted&#x2D;pair links, one of the interfaces cannot send or receive traffic. </p><p class="bullet" id="1024141"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>On fiber&#x2D;optic or twisted&#x2D;pair links, one of the interfaces is down while the other is up. </p><p class="bullet" id="1024142"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>One of the fiber strands in the cable is disconnected. </p><p class="heading2" id="1024909">Mechanisms to Detect Unidirectional Links</p><p class="text" id="1025805">The UDLD protocol is<span style="color:#ff00ff;">&#160;</span>implemented to correct<span style="color:#ff00ff;">&#160;</span>certain assumptions made by other protocols and to help the Spanning Tree Protocol to function properly to avoid dangerous Layer 2 loops.</p><p class="text" id="1025806">UDLD uses two basic mechanisms&#x3A;</p><p class="bullet" id="1025807"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>It advertises the identity of a port and learns about its neighbors. This information about the neighbors is maintained in a cache table.</p><p class="bullet" id="1025808"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span>It sends continuous echo messages in certain circumstances that require fast notifications or fast re&#x2D;synchronization of the cached information.</p><p class="heading3" id="1025762">Neighbor Database Maintenance </p><p class="text" id="1025763">UDLD learns about other UDLD neighbors by periodically sending a Hello packet (also called an advertisement or probe) on every active interface <span style="color:#000000;">to inform each device about its neighbors.</span>&#160;</p><p class="text" id="1025867">When the switch receives a Hello message, the switch caches the information until the age time expires. If the switch receives a new Hello message before <span style="color:#000000;">the aging of a</span>n older cache entry, the switch replaces the older entry with the new one. </p><p class="text" id="1025868">Whenever an interface is disabled and UDLD is running, <span style="color:#000000;">or</span><span style="color:#ff00ff;">&#160;</span>UDLD is disabled on an interface, or the switch is reset, UDLD clears all the existing cache entries for the interfaces that are affected by the<span style="color:#ff00ff;">&#160;</span>configuration change. UDLD sends <span style="color:#000000;">a</span><span style="color:#ff00ff;">&#160;</span>message to the neighbors to flush the part of their caches affected by the status change. This UDLD message is intended <span style="color:#000000;">to synchronize the caches. </span></p><p class="heading3" id="1024729">Echo Detection</p><p class="text" id="1024730">UDLD <span style="color:#000000;">depends</span> on an echo&#x2D;detection mechanism. UDLD restarts the detection window on its side of the connection and sends echo message<span style="color:#000000;">s in response to the request, w</span>henever a UDLD device learns about a new neighbor or receives a re&#x2D;synchronization request from an out&#x2D;of&#x2D;sync neighbor.<span style="color:#000000;">&#160;</span>This behavior is the same on all UDLD neighbors because the sender of the echoes expects to receive an echo<span style="color:#000000;"> as a response. </span></p><p class="text" id="1024731">If the detection window ends and no valid response is received, the link is shut down, depending on the UDLD mode. When UDLD is in normal mode, the link <span style="color:#000000;">is</span><span style="color:#ff00ff;">&#160;</span>considered <span style="color:#000000;">to be undetermined</span> and <span style="color:#000000;">is not </span>shut down. When UDLD is in aggressive mode, the link is considered <span style="color:#000000;">to be </span>unidirectional, and the interface is shut down. </p><p class="text" id="1025473" style="color:#000000;">In normal mode, if UDLD is in the advertisement or in the detection phase and all the neighbor cache entries are aged out, UDLD restarts the link&#x2D;up sequence to re&#x2D;synchronize with potentially out&#x2D;of&#x2D;sync neighbors. </p><p class="text" id="1024733"><span style="color:#000000;">In aggressive mode, if UDLD is in the advertisement or in the detection phase and all the nei</span>ghbors of a po<span style="color:#000000;">rt are aged out, UDLD restarts the link&#x2D;up sequence to re&#x2D;synchronize with potentially out&#x2D;of&#x2D;sync neighbors. UDLD s</span>huts down the port, after the continuous m<span style="color:#000000;">essages, if the</span> link state is undetermined. </p><p class="heading1" id="1023709"><a id="XREF_79725__Configuring_UDLD147" name="XREF_79725__Configuring_UDLD147">Configuring UDLD</a></p><p class="text" id="1024991"><a id="147_text_1024991" name="147_text_1024991"></a>This section describes how to use Command Line Interface (CLI) commands to do the following&#x3A;</p><p class="bullet" id="1027108"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_99547__Enabling_and_Disabling_UDLD147" style="color:#0000ff;background-color:transparent;">Enabling and Disabling UDLD</a>.</p><p class="bullet" id="1027113"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_54629__Configuring_mode147" style="color:#0000ff;background-color:transparent;">Configuring the Operational Mode</a>.</p><p class="bullet" id="1027115"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_95742__Configuring_Maximum_Number_of_MAC_Addresses_Allowed147" style="color:#0000ff;background-color:transparent;">Configuring the Probe-Timer</a>.</p><p class="bullet" id="1027125"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_92128__Configuring_echo-wait-timer147" style="color:#0000ff;background-color:transparent;">Configuring the Echo-Wait-Timer</a>.</p><p class="bullet" id="1027129"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_15429__Clearing_UDLD_Statistics147" style="color:#0000ff;background-color:transparent;">Clearing UDLD Statistics</a>.</p><p class="bullet" id="1027133"><span class="Bullet_Character">&#x2022;&#160;&#160;&#160; </span><a  href="#XREF_66212__Recovering_a_port_from_UDLD_shutdown147" style="color:#0000ff;background-color:transparent;">Verifying the UDLD Configuration</a><a  href="#XREF_66212__Recovering_a_port_from_UDLD_shutdown147"></a>.</p><p><div align="left"><table class="Note" style="max-width: 100% ;height: auto;"><col width="600.00px"/><tr height="38.00px"><td><p class="CellBody_note_text" id="1032079" style="font-kerning:none;"><span class="Bold">Note.  </span>See the &#x201c;UDLD Commands&#x201d; chapter in the <span class="Times_italics" style="font-style:Italic;background-color:transparent;"><span data-keyref="CLI Reference Guide">OmniSwitch AOS Release 8 CLI Reference Guide</span>&#160;</span>for complete documentation of UDLD CLI commands.</p></td></tr></table></div></p><p class="heading2" id="1023585"><a id="XREF_99547__Enabling_and_Disabling_UDLD147" name="XREF_99547__Enabling_and_Disabling_UDLD147">Enabling and Disabling UDLD</a></p><p class="text" id="1026001"><a id="147_text_1026001" name="147_text_1026001"></a>By default, UDLD is disabled on all switch ports. To enable UDLD on a switch, use the <a href="../c_udld/c_udld.htm#XREF_46756__udld" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld</a> command. For example, the following command enables UDLD on a switch&#x3A;</p><p class="example1" id="1023652">&#x2D;&#x3E; udld enable</p><p class="text" id="1023663">To <a id="index_1023662" name="index_1023662"></a><a data-indexterm="udld:disabling%20on%20switch" id="UDLD_disabling_on_switch" name="UDLD_disabling_on_switch"></a>disable UDLD on a switch, use the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">udld</span> command with the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">disable</span> parameter. For example, the following command disables UDLD on a switch&#x3A;</p><p class="example1" id="1023604">&#x2D;&#x3E; udld disable</p><p class="heading3" id="1023671">Enabling UDLD on a Port</p><p class="text" id="1023695">By default, UDLD is disabled on all switch ports. To enable UDLD on a port, use the <a href="../c_udld/c_udld.htm#XREF_42692__lldp_transmit_hold-multiplier" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld port</a> command. For example, the following command enables UDLD on port 3 of slot 1&#x3A;</p><p class="example1" id="1023696">&#x2D;&#x3E; udld port 1&#47;3 enable</p><p class="text" id="1023698">To <a id="index_1023697" name="index_1023697"></a><a data-indexterm="udld:enabling%20on%20port" id="UDLD_enabling_on_port" name="UDLD_enabling_on_port"></a>enable UDLD on multiple ports, specify a range of ports. For example&#x3A;</p><p class="example1" id="1023677">&#x2D;&#x3E; udld port 1&#47;6&#x2D;1&#x30; enable</p><p class="text" id="1023704">To <a id="index_1023703" name="index_1023703"></a><a data-indexterm="udld:disabling%20on%20port" id="UDLD_disabling_on_port" name="UDLD_disabling_on_port"></a>disable UDLD on a port, use the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">udld port </span>command with the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">disable</span> parameter. For example, the following command disables UDLD on a range of ports&#x3A;</p><p class="example1" id="1023681">&#x2D;&#x3E; udld port 5&#47;21&#x2D;24 disable</p><p class="heading2" id="1023922"><a id="XREF_54629__Configuring_mode147" name="XREF_54629__Configuring_mode147">Configuring the Operational Mode</a></p><p class="text" id="1023960"><a id="147_text_1023960" name="147_text_1023960"></a>To configure the operational mode, use the <a href="../c_udld/c_udld.htm#XREF_30700__udld_port_mode" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld mode</a> command as shown&#x3A;</p><p class="example1" id="1025554">&#x2D;&#x3E; udld mode aggressive</p><p class="text" id="1025555">For example, to configure the mode for port 4 on slot 2, <span style="color:#000000;">enter&#x3A;</span></p><p class="example1" id="1026465">&#x2D;&#x3E; udld port 2&#47;4 mode aggressive</p><p class="text" id="1026699">To configure the mode for multiple ports, specify a range of ports. For example&#x3A;</p><p class="example1" id="1026700">&#x2D;&#x3E; udld port 2&#47;7&#x2D;18 mode normal</p><p class="heading2" id="1023886"><a id="XREF_95742__Configuring_Maximum_Number_of_MAC_Addresses_Allowed147" name="XREF_95742__Configuring_Maximum_Number_of_MAC_Addresses_Allowed147"></a><a id="XREF_79865__Configuring_a_Single_MAC_Address147" name="XREF_79865__Configuring_a_Single_MAC_Address147"></a><a id="XREF_63493__Configuring_a_MAC_Address_Entry147" name="XREF_63493__Configuring_a_MAC_Address_Entry147">Configuring the Probe&#x2D;Timer</a></p><p class="text" id="1023890"><a id="147_text_1023890" name="147_text_1023890"></a>To configure the probe&#x2D;message advertisement timer, use the <a href="../c_udld/c_udld.htm#XREF_88626__udld_probe-timer" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld probe-timer</a> command as shown&#x3A;</p><p class="example1" id="1023891">&#x2D;&#x3E; udld probe&#x2D;timer 2&#x30;</p><p class="text" id="1023908">For example, to configure the probe&#x2D;timer for port 3 on slot 6, <span style="color:#000000;">enter&#x3A;</span></p><p class="example1" id="1023909">&#x2D;&#x3E; udld port 6&#47;3 probe&#x2D;timer 18</p><p class="text" id="1026475">To configure the probe&#x2D;timer for multiple ports, specify a range of ports. For example&#x3A;</p><p class="example1" id="1026481">&#x2D;&#x3E; udld port 1&#47;8&#x2D;21 probe&#x2D;timer 18</p><p class="text" id="1023912">Use the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">no</span> form of this command to reset the timer. For example, the following command resets the timer for port 4 of slot 6&#x3A;</p><p class="example1" id="1023855">&#x2D;&#x3E; no udld port 6&#47;4 probe&#x2D;timer</p><p class="text" id="1026538">The following command resets the timer for multiple ports&#x3A;</p><p class="example1" id="1026545">&#x2D;&#x3E; no udld port 1&#47;8&#x2D;21 probe&#x2D;timer</p><p class="heading2" id="1023984"><a id="XREF_92128__Configuring_echo-wait-timer147" name="XREF_92128__Configuring_echo-wait-timer147">Configuring the Echo&#x2D;Wait&#x2D;Timer</a></p><p class="text" id="1023988"><a id="147_text_1023988" name="147_text_1023988"></a>To configure the echo&#x2D;based detection timer, use the <a href="../c_udld/c_udld.htm#XREF_40594__show_lldp_remote-system" style="font-weight:Bold;color:#0000ff;background-color:transparent;">udld echo-wait-timer</a> command as shown&#x3A;</p><p class="example1" id="1023989">&#x2D;&#x3E; udld echo&#x2D;wait&#x2D;timer 9</p><p class="text" id="1023990">For example, to configure the echo&#x2D;wait&#x2D;timer for port 5 on slot 6, <span style="color:#000000;">enter&#x3A;</span></p><p class="example1" id="1023991">&#x2D;&#x3E; udld port 6&#47;5 echo&#x2D;wait&#x2D;timer 12</p><p class="text" id="1026499">To configure the echo&#x2D;wait&#x2D;timer for multiple ports, specify a range of ports. For example&#x3A;</p><p class="example1" id="1026564">&#x2D;&#x3E; udld port 1&#47;8&#x2D;21 echo&#x2D;wait&#x2D;timer 9</p><p class="text" id="1026566">Use the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">no</span> form of this command to reset the timer. For example, the following command resets the timer for port 6 of slot 4&#x3A;</p><p class="example1" id="1023993">&#x2D;&#x3E; no udld port 4&#47;6 echo&#x2D;wait&#x2D;timer</p><p class="text" id="1026573">The following command resets the timer for multiple ports&#x3A;</p><p class="example1" id="1026574">&#x2D;&#x3E; no udld port 1&#47;8&#x2D;21 echo&#x2D;wait&#x2D;timer</p><p class="heading2" id="1024169"><a id="XREF_15429__Clearing_UDLD_Statistics147" name="XREF_15429__Clearing_UDLD_Statistics147">Clearing UDLD Statistics</a></p><p class="text" id="1026250"><a id="147_text_1026250" name="147_text_1026250"></a>To clear the UDLD statistics, use the <a href="../c_udld/c_udld.htm#XREF_46084__clear_udld_statistics_port" style="font-weight:Bold;color:#0000ff;background-color:transparent;">clear udld statistics port</a> command. For example, to clear the statistics for port 4 on slot 1, <span style="color:#000000;">enter&#x3A;</span></p><p class="example1" id="1026251">&#x2D;&#x3E; clear udld statistics port 1&#47;4</p><p class="text" id="1026589">To clear the UDLD statistics on all the ports, enter&#x3A;</p><p class="example1" id="1026590">&#x2D;&#x3E; clear udld statistics</p><p class="heading1" id="1029762"><a id="XREF_66212__Recovering_a_port_from_UDLD_shutdown147" name="XREF_66212__Recovering_a_port_from_UDLD_shutdown147"></a><a id="XREF_72103__Verifying_the_UDLD_Configuration147" name="XREF_72103__Verifying_the_UDLD_Configuration147">Verifying the UDLD Configuration</a></p><p>To display UDLD configuration and statistics information, use the show commands listed below&#x3A;<div align="left"><table class="Related_Cmds" style="max-width: 100% ;height: auto;"><col width="225.60px"/><col width="374.40px"/><tr height="22.00px"><td><p class="CellBody_cli_cmd" id="1012343"><a id="147_CellBody_cli_cmd_1012343" name="147_CellBody_cli_cmd_1012343"></a><a href="../c_udld/c_udld.htm#XREF_51176__show_udld_configuration" style="font-kerning:none;color:#0000ff;background-color:transparent;">show udld configuration</a></p></td><td><p class="CellBody" id="1012452"><a id="index_1024239" name="index_1024239"></a><a data-indexterm="udld:show" id="UDLD_show" name="UDLD_show"></a>Displays the global status of UDLD configuration.</p></td></tr><tr height="38.00px"><td><p class="CellBody_cli_cmd" id="1024252"><a href="../c_udld/c_udld.htm#XREF_98813__show_udld_configuration_port" style="font-kerning:none;color:#0000ff;background-color:transparent;">show udld configuration port</a></p></td><td><p class="CellBody" id="1024255">Displays the configuration information for all UDLD ports or for a particular UDLD port on the switch.</p></td></tr><tr height="22.00px"><td><p class="CellBody_cli_cmd" id="1012892"><a href="../c_udld/c_udld.htm#XREF_73091__show_udld_statistics_port" style="font-kerning:none;color:#0000ff;background-color:transparent;">show udld statistics port</a></p></td><td><p class="CellBody" id="1012894">Displays the UDLD statistics for a specific port.</p></td></tr><tr height="22.00px"><td><p class="CellBody_cli_cmd" id="1026801"><a href="../c_udld/c_udld.htm#XREF_82093__show_udld_neighbor_port" style="font-kerning:none;color:#0000ff;background-color:transparent;">show udld neighbor port</a></p></td><td><p class="CellBody" id="1026804">Displays the UDLD neighbor ports.</p></td></tr><tr height="22.00px"><td><p class="CellBody_cli_cmd" id="1026789"><a href="../c_udld/c_udld.htm#XREF_76263__show_udld_status_port" style="font-kerning:none;color:#0000ff;background-color:transparent;">show udld status port</a></p></td><td><p class="CellBody" id="1026792">Displays the UDLD status for all ports or for a specific port.</p></td></tr></table></div></p><p class="text" id="1025058">For more information about the resulting display from these commands, see the <span class="Times_italics" style="font-style:Italic;background-color:transparent;"><span data-keyref="CLI Reference Guide">OmniSwitch AOS Release 8 CLI Reference Guide</span></span>. An example of the output for the <span class="Times_Bold" style="font-weight:Bold;background-color:transparent;">show udld configuration port </span>and<span class="Times_Bold" style="font-weight:Bold;background-color:transparent;"> show udld statistics port </span>commands is also given in <a  href="#XREF_77056__Sample_MAC_Address_Table_Configuration147" style="color:#0000ff;background-color:transparent;">Quick Steps for Configuring UDLD</a>.</p></div>
</body>
</html>